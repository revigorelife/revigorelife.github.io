<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>All Products - RevigoreLife</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Browse all RevigoreLife wellness products. Health supplements, diet solutions, CBD, gadgets and more.">

  <!-- Open Graph -->
  <meta property="og:title" content="All Products - RevigoreLife">
  <meta property="og:description" content="Browse all RevigoreLife wellness products with honest reviews and country-specific availability.">
  <meta property="og:image" content="/og-cover.jpg">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://revigorelife.com/products/">

  <link rel="icon" type="image/png" sizes="64x64" href="/favicon-64.png">

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZYSHDCW0X5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-ZYSHDCW0X5', { anonymize_ip: true });
  </script>

  <style>
    :root{--brand:#1C6B63;--ink:#163a36;--bg:#f7f9f8;--border:#e7ecea;--accent:#2ecc71;--warning:#f39c12}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink);line-height:1.6}

    /* Header */
    header.site-head{background:#fff;border-bottom:1px solid var(--border)}
    header .row{
      max-width:1200px;margin:0 auto;display:grid;
      grid-template-columns:220px 1fr 260px;gap:16px;align-items:center;padding:14px 16px
    }
    .logo{height:clamp(60px, 8vw, 96px); object-fit:contain; filter:drop-shadow(0 4px 10px rgba(0,0,0,.06))}
    .search{display:flex;gap:8px}
    .search input{width:100%;padding:10px 12px;border:1px solid #cdd6d4;border-radius:12px}
    .search button{padding:10px 14px;border-radius:12px;border:0;background:var(--brand);color:#fff;font-weight:700;cursor:pointer}
    .quicklinks{text-align:right}
    .quicklinks a{color:var(--ink);text-decoration:none;font-weight:600;margin-left:8px}

    /* Main content */
    .container{max-width:1200px;margin:0 auto;padding:20px 16px}
    .back-nav{margin-bottom:20px}
    .back-btn{display:inline-block;background:var(--brand);color:#fff;padding:8px 16px;border-radius:8px;text-decoration:none;font-weight:600;font-size:0.9rem}
    .back-btn:hover{opacity:0.9}

    /* Page header */
    .page-header{margin-bottom:30px;text-align:center}
    .page-header h1{color:var(--brand);margin-bottom:10px;font-size:2.2rem}
    .results-count{color:#666;font-size:0.95rem}

    /* Category filters */
    .category-filters{background:#fff;border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:25px;box-shadow:0 2px 8px rgba(0,0,0,.05)}
    .category-filters h3{margin:0 0 15px;color:var(--ink);font-size:1.1rem}
    .filter-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px}
    .filter-item{
      display:flex;flex-direction:column;align-items:center;padding:12px;
      border:2px solid var(--border);border-radius:10px;cursor:pointer;
      transition:all 0.2s ease;text-decoration:none;color:var(--ink)
    }
    .filter-item:hover{border-color:var(--brand);background:#f8fffe}
    .filter-item.active{border-color:var(--brand);background:#eaf7f5}
    .filter-icon{font-size:1.8rem;margin-bottom:6px}
    .filter-name{font-weight:600;font-size:0.9rem}

    /* Sort and view controls */
    .controls{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;background:#fff;padding:15px 20px;border-radius:10px;border:1px solid var(--border)}
    .sort-controls{display:flex;align-items:center;gap:15px}
    .sort-controls label{font-weight:600;color:var(--ink)}
    .sort-select{padding:8px 12px;border:1px solid var(--border);border-radius:8px;background:#fff}
    .view-toggle{display:flex;gap:8px}
    .view-btn{padding:8px 12px;border:1px solid var(--border);border-radius:6px;background:#fff;cursor:pointer;transition:all 0.2s}
    .view-btn:hover,.view-btn.active{background:var(--brand);color:#fff;border-color:var(--brand)}

    /* Product grid */
    .products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-bottom:40px}
    .products-grid.list-view{grid-template-columns:1fr;gap:15px}

    /* Product cards */
    .product-card{
      background:#fff;border:1px solid var(--border);border-radius:12px;
      overflow:hidden;transition:all 0.3s ease;cursor:pointer;
      box-shadow:0 2px 8px rgba(0,0,0,.06)
    }
    .product-card:hover{transform:translateY(-3px);box-shadow:0 8px 25px rgba(0,0,0,.12)}

    .product-image{position:relative;aspect-ratio:4/5;overflow:hidden;padding:15px}
    .product-image img{width:100%;height:100%;object-fit:contain;transition:transform 0.3s ease}
    .product-card:hover .product-image img{transform:scale(1.05)}

    .discount-badge{
      position:absolute;top:10px;left:10px;background:#e74c3c;color:#fff;
      padding:4px 8px;border-radius:4px;font-size:0.8rem;font-weight:700
    }

    .product-info{padding:15px}
    .product-title{font-weight:600;margin-bottom:8px;font-size:0.95rem;line-height:1.3;
      display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .product-desc{color:#666;font-size:0.85rem;margin-bottom:10px;
      display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}

    .product-rating{display:flex;align-items:center;gap:6px;margin-bottom:10px;font-size:0.85rem}
    .stars{color:var(--warning);letter-spacing:1px}
    .rating-text{color:#666}

    .product-price{display:flex;align-items:baseline;gap:8px;margin-bottom:8px}
    .current-price{font-size:1.1rem;font-weight:700;color:var(--ink)}
    .original-price{font-size:0.9rem;color:#999;text-decoration:line-through}
    .price-currency{font-size:0.8rem;vertical-align:top}

    .product-meta{color:#666;font-size:0.8rem;margin-bottom:12px}

    .product-options{display:flex;gap:6px;margin-bottom:12px}
    .option-swatch{width:16px;height:16px;border-radius:50%;border:2px solid #ddd;cursor:pointer}
    .option-swatch:hover{border-color:var(--brand)}

    .product-actions{display:flex;gap:8px}
    .btn{padding:8px 16px;border-radius:8px;text-decoration:none;font-weight:600;font-size:0.9rem;text-align:center;cursor:pointer;border:none;transition:all 0.2s}
    .btn-primary{background:var(--brand);color:#fff;flex:1}
    .btn-primary:hover{background:#155853}
    .btn-secondary{background:#fff;color:var(--brand);border:2px solid var(--brand);flex:1}
    .btn-secondary:hover{background:var(--brand);color:#fff}

    /* List view styles */
    .products-grid.list-view .product-card{display:flex;align-items:center;padding:15px}
    .products-grid.list-view .product-image{aspect-ratio:1;width:120px;margin-right:20px;padding:10px}
    .products-grid.list-view .product-info{flex:1;padding:0}

    /* Pagination */
    .pagination{display:flex;justify-content:center;align-items:center;gap:10px;margin-top:40px}
    .page-btn{padding:8px 12px;border:1px solid var(--border);border-radius:6px;background:#fff;color:var(--ink);text-decoration:none;font-weight:600}
    .page-btn:hover,.page-btn.active{background:var(--brand);color:#fff;border-color:var(--brand)}
    .page-btn:disabled{opacity:0.5;cursor:not-allowed}

    /* Footer */
    footer.site-footer{background:var(--brand);color:#fff;text-align:center;margin-top:60px}
    footer.site-footer nav{display:flex;gap:22px;justify-content:center;padding:14px;border-bottom:1px solid rgba(255,255,255,.2)}
    footer.site-footer a{color:#fff;text-decoration:none;font-weight:600}
    footer.site-footer .legal{padding:12px 16px 18px;opacity:.95}

    /* Responsive */
    @media (max-width:900px){
      header .row{grid-template-columns:170px 1fr}
      .controls{flex-direction:column;gap:15px;align-items:stretch}
      .sort-controls{justify-content:space-between}
    }
    @media (max-width:640px){
      .filter-grid{grid-template-columns:repeat(3,1fr)}
      .products-grid{grid-template-columns:repeat(2,1fr);gap:15px}
      .products-grid.list-view{grid-template-columns:1fr}
      .products-grid.list-view .product-card{flex-direction:column;text-align:center}
      .products-grid.list-view .product-image{width:100%;margin:0 0 15px 0}
    }
  </style>
</head>
<body>

<header class="site-head">
  <div class="row">
    <a href="/"><img src="/assets/img/revigorelife-logo1.png" alt="RevigoreLife" class="logo"
      onerror="this.onerror=null; this.src='/assets/img/revigorelife-logo.png';"></a>

    <form class="search" role="search">
      <input name="q" type="search" placeholder="Search products‚Ä¶" aria-label="Search products" id="product-search">
      <button type="submit">Search</button>
    </form>

    <div class="quicklinks">
      <a href="/categories/">Categories</a>
      <a href="/">Home</a>
    </div>
  </div>
</header>

<main class="container">
  <div class="back-nav">
    <a href="/" class="back-btn">‚Üê Back to Home</a>
  </div>

  <div class="page-header">
    <h1>All Products</h1>
    <div class="results-count" id="results-count">Loading products...</div>
  </div>

  <!-- Category Filters -->
  <section class="category-filters">
    <h3>Shop by Category</h3>
    <div class="filter-grid">
      <a href="#" class="filter-item active" data-category="all">
        <span class="filter-icon">üè™</span>
        <span class="filter-name">All Products</span>
      </a>
      <a href="#" class="filter-item" data-category="health">
        <span class="filter-icon">üè•</span>
        <span class="filter-name">Health</span>
      </a>
      <a href="#" class="filter-item" data-category="diet">
        <span class="filter-icon">ü•ó</span>
        <span class="filter-name">Diet</span>
      </a>
      <a href="#" class="filter-item" data-category="male-enhancement">
        <span class="filter-icon">üí™</span>
        <span class="filter-name">Male Enhancement</span>
      </a>
      <a href="#" class="filter-item" data-category="cbd-hemp">
        <span class="filter-icon">üåø</span>
        <span class="filter-name">CBD / Hemp</span>
      </a>
      <a href="#" class="filter-item" data-category="gadgets">
        <span class="filter-icon">üì±</span>
        <span class="filter-name">Gadgets</span>
      </a>
    </div>
  </section>

  <!-- Controls -->
  <div class="controls">
    <div class="sort-controls">
      <label for="sort-select">Sort by:</label>
      <select id="sort-select" class="sort-select">
        <option value="featured">Featured</option>
        <option value="price-low">Price: Low to High</option>
        <option value="price-high">Price: High to Low</option>
        <option value="rating">Customer Rating</option>
        <option value="newest">Newest</option>
      </select>
    </div>
    <div class="view-toggle">
      <button class="view-btn active" data-view="grid" title="Grid View">‚äû</button>
      <button class="view-btn" data-view="list" title="List View">‚ò∞</button>
    </div>
  </div>

  <!-- Products Grid -->
  <section class="products-grid" id="products-grid" aria-live="polite">
    <!-- Products will be loaded here -->
  </section>

  <!-- Pagination -->
  <div class="pagination" id="pagination">
    <!-- Pagination will be generated here -->
  </div>

</main>

<footer class="site-footer">
  <nav>
    <a href="/privacy.html">Privacy</a>
    <a href="/disclosures.html">Disclosures</a>
    <a href="/">Home</a>
  </nav>
  <div class="legal">¬© <script>document.write(new Date().getFullYear())</script> RevigoreLife</div>
</footer>

<script>
// Global variables
let allProducts = [];
let filteredProducts = [];
let currentCategory = 'all';
let currentSort = 'featured';
let currentView = 'grid';
let currentPage = 1;
const productsPerPage = 12;

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
  initializeSearch();
  initializeFilters();
  initializeControls();
  loadProducts();
});

// Search functionality
function initializeSearch() {
  const searchForm = document.querySelector('.search');
  const searchInput = document.getElementById('product-search');
  
  searchForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const query = searchInput.value.trim();
    if (query) {
      searchProducts(query);
    }
  });
}

// Filter functionality
function initializeFilters() {
  const filterItems = document.querySelectorAll('.filter-item');
  
  filterItems.forEach(item => {
    item.addEventListener('click', function(e) {
      e.preventDefault();
      
      // Update active state
      filterItems.forEach(f => f.classList.remove('active'));
      this.classList.add('active');
      
      // Update current category
      currentCategory = this.dataset.category;
      currentPage = 1;
      
      // Apply filter
      applyFilters();
      
      // Track analytics
      gtag('event', 'filter_click', {
        category: currentCategory,
        page: 'products'
      });
    });
  });
}

// Controls functionality
function initializeControls() {
  // Sort controls
  const sortSelect = document.getElementById('sort-select');
  sortSelect.addEventListener('change', function() {
    currentSort = this.value;
    currentPage = 1;
    applyFilters();
  });
  
  // View toggle
  const viewBtns = document.querySelectorAll('.view-btn');
  const productsGrid = document.getElementById('products-grid');
  
  viewBtns.forEach(btn => {
    btn.addEventListener('click', function() {
      viewBtns.forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      
      currentView = this.dataset.view;
      
      if (currentView === 'list') {
        productsGrid.classList.add('list-view');
      } else {
        productsGrid.classList.remove('list-view');
      }
    });
  });
}

// Load products
async function loadProducts() {
  try {
    // Try to load from featured.json first
    const response = await fetch('/assets/data/featured.json', {cache: 'no-store'});
    if (response.ok) {
      allProducts = await response.json();
    }
  } catch (e) {
    console.log('Featured.json not found, using fallback data');
  }
  
  // Fallback data if JSON fails
  if (!allProducts.length) {
    allProducts = [
      {
        slug: 'bioma-probiotics',
        title: 'Bioma Probiotics ‚Äî Gut Health Support (US)',
        desc: 'Digestive health support for men & women. 3-in-1 formula with prebiotic XOS, tributyrin (postbiotic) and Bifidobacterium strains.',
        image: '/assets/img/products/bioma-probiotics/ini1.png',
        price: { d: 26, c: '14', currency: '$' },
        originalPrice: { d: 69, c: '95', currency: '$' },
        rating: 4.6,
        reviews: '2k+',
        category: 'health',
        swatches: ['#2ecc71', '#3498db', '#f39c12'],
        countryNote: 'Available: US',
        productUrl: '/us/products/bioma-probiotics/',
        goUrl: '/go/bioma-probiotics/?country=US',
        featured: true,
        newest: false
      }
      // Add more sample products here as needed
    ];
  }
  
  // Apply initial filters
  applyFilters();
}

// Apply filters and sorting
function applyFilters() {
  // Filter by category
  if (currentCategory === 'all') {
    filteredProducts = [...allProducts];
  } else {
    filteredProducts = allProducts.filter(product => 
      product.category === currentCategory
    );
  }
  
  // Sort products
  sortProducts();
  
  // Update display
  updateProductsDisplay();
  updateResultsCount();
}

// Search products
function searchProducts(query) {
  const searchTerm = query.toLowerCase();
  filteredProducts = allProducts.filter(product =>
    product.title.toLowerCase().includes(searchTerm) ||
    product.desc.toLowerCase().includes(searchTerm) ||
    (product.category && product.category.toLowerCase().includes(searchTerm))
  );
  
  currentPage = 1;
  updateProductsDisplay();
  updateResultsCount(`Search results for "${query}"`);
}

// Sort products
function sortProducts() {
  switch (currentSort) {
    case 'price-low':
      filteredProducts.sort((a, b) => (a.price?.d || 0) - (b.price?.d || 0));
      break;
    case 'price-high':
      filteredProducts.sort((a, b) => (b.price?.d || 0) - (a.price?.d || 0));
      break;
    case 'rating':
      filteredProducts.sort((a, b) => (b.rating || 0) - (a.rating || 0));
      break;
    case 'newest':
      filteredProducts.sort((a, b) => (b.newest ? 1 : 0) - (a.newest ? 1 : 0));
      break;
    default: // featured
      filteredProducts.sort((a, b) => (b.featured ? 1 : 0) - (a.featured ? 1 : 0));
  }
}

// Update products display
function updateProductsDisplay() {
  const startIndex = (currentPage - 1) * productsPerPage;
  const endIndex = startIndex + productsPerPage;
  const pageProducts = filteredProducts.slice(startIndex, endIndex);
  
  const productsGrid = document.getElementById('products-grid');
  productsGrid.innerHTML = pageProducts.map(createProductCard).join('');
  
  updatePagination();
}

// Create product card HTML
function createProductCard(product) {
  const dollars = product.price?.d || 0;
  const cents = product.price?.c || '00';
  const currency = product.price?.currency || '$';
  const originalPrice = product.originalPrice;
  
  const discountPercent = originalPrice ? 
    Math.round(((originalPrice.d - dollars) / originalPrice.d) * 100) : 0;
  
  const swatches = (product.swatches || []).slice(0, 4)
    .map(color => `<span class="option-swatch" style="background:${color}" title="${color}"></span>`)
    .join('');
  
  const stars = generateStars(product.rating || 0);
  
  return `
    <article class="product-card" onclick="window.location.href='${product.productUrl || '#'}'">
      <div class="product-image">
        ${discountPercent > 0 ? `<div class="discount-badge">${discountPercent}% OFF</div>` : ''}
        <img src="${product.image || '/assets/img/revigorelife-logo1.png'}" 
             alt="${escapeHtml(product.title)}"
             onerror="this.onerror=null; this.src='/assets/img/revigorelife-logo1.png';">
      </div>
      
      <div class="product-info">
        <h3 class="product-title">${escapeHtml(product.title)}</h3>
        ${product.desc ? `<p class="product-desc">${escapeHtml(product.desc)}</p>` : ''}
        
        <div class="product-rating">
          <span class="stars">${stars}</span>
          <span class="rating-text">${(product.rating || 0).toFixed(1)} (${product.reviews || '0'})</span>
        </div>
        
        <div class="product-price">
          <span class="current-price">${currency}${dollars}<sup class="price-currency">${cents}</sup></span>
          ${originalPrice ? `<span class="original-price">${currency}${originalPrice.d}<sup>${originalPrice.c}</sup></span>` : ''}
        </div>
        
        <div class="product-meta">${escapeHtml(product.countryNote || '')}</div>
        
        ${swatches ? `<div class="product-options">${swatches}</div>` : ''}
        
        <div class="product-actions">
          <a href="${product.productUrl || '#'}" class="btn btn-secondary">Details</a>
          <a href="${product.goUrl || '#'}" class="btn btn-primary" 
             rel="sponsored nofollow noopener"
             onclick="event.stopPropagation(); gtag('event','affiliate_click',{offer:'${product.slug}',placement:'products-page'});">
             Buy Now
          </a>
        </div>
      </div>
    </article>
  `;
}

// Generate star rating
function generateStars(rating) {
  const full = Math.floor(rating);
  const half = (rating - full) >= 0.5 ? 1 : 0;
  const empty = 5 - full - half;
  
  return '‚òÖ'.repeat(full) + (half ? '‚òÜ' : '') + '‚òÜ'.repeat(empty);
}

// Update results count
function updateResultsCount(customText = null) {
  const resultsCount = document.getElementById('results-count');
  const total = filteredProducts.length;
  const start = (currentPage - 1) * productsPerPage + 1;
  const end = Math.min(currentPage * productsPerPage, total);
  
  if (customText) {
    resultsCount.textContent = `${customText} (${total} results)`;
  } else if (total === 0) {
    resultsCount.textContent = 'No products found';
  } else {
    resultsCount.textContent = `Showing ${start}-${end} of ${total} products`;
  }
}

// Update pagination
function updatePagination() {
  const totalPages = Math.ceil(filteredProducts.length / productsPerPage);
  const paginationContainer = document.getElementById('pagination');
  
  if (totalPages <= 1) {
    paginationContainer.innerHTML = '';
    return;
  }
  
  let paginationHTML = '';
  
  // Previous button
  if (currentPage > 1) {
    paginationHTML += `<a href="#" class="page-btn" data-page="${currentPage - 1}">‚Üê Previous</a>`;
  }
  
  // Page numbers
  const startPage = Math.max(1, currentPage - 2);
  const endPage = Math.min(totalPages, currentPage + 2);
  
  if (startPage > 1) {
    paginationHTML += `<a href="#" class="page-btn" data-page="1">1</a>`;
    if (startPage > 2) paginationHTML += '<span>...</span>';
  }
  
  for (let i = startPage; i <= endPage; i++) {
    paginationHTML += `<a href="#" class="page-btn ${i === currentPage ? 'active' : ''}" data-page="${i}">${i}</a>`;
  }
  
  if (endPage < totalPages) {
    if (endPage < totalPages - 1) paginationHTML += '<span>...</span>';
    paginationHTML += `<a href="#" class="page-btn" data-page="${totalPages}">${totalPages}</a>`;
  }
  
  // Next button
  if (currentPage < totalPages) {
    paginationHTML += `<a href="#" class="page-btn" data-page="${currentPage + 1}">Next ‚Üí</a>`;
  }
  
  paginationContainer.innerHTML = paginationHTML;
  
  // Add click handlers
  paginationContainer.querySelectorAll('.page-btn').forEach(btn => {
    btn.addEventListener('click', function(e) {
      e.preventDefault();
      currentPage = parseInt(this.dataset.page);
      updateProductsDisplay();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  });
}

// Utility function to escape HTML
function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}
</script>

</body>
</html>
